@inherits TabBaseComponent

@if (Visible)
{
    <li @ref="Element" id="@GetId()" class="@GetCssClass()" style="@GetStyleString()" @attributes="GetLiAttributes()">
        @if (ShouldRenderLink)
        {
            <a href="@Href" @onclick="HandleClick" @onclick:preventDefault="@(OnClick.HasDelegate)">
                @if (!string.IsNullOrWhiteSpace(Icon))
                {
                    <TabIcon Icon="@Icon" CssClass="breadcrumb-icon" />
                }
                @if (ChildContent != null)
                {
                    @ChildContent
                }
                else
                {
                    @Text
                }
            </a>
        }
        else
        {
            @if (!string.IsNullOrWhiteSpace(Icon))
            {
                <TabIcon Icon="@Icon" CssClass="breadcrumb-icon" />
            }
            @if (ChildContent != null)
            {
                @ChildContent
            }
            else
            {
                @Text
            }
        }
    </li>
}

@code {
    private Dictionary<string, object>? GetLiAttributes()
    {
        var attributes = new Dictionary<string, object>();

        if (IsActive)
        {
            attributes["aria-current"] = "page";
        }

        if (AdditionalAttributes != null)
        {
            foreach (var attr in AdditionalAttributes)
            {
                if (attr.Key != "class" && attr.Key != "style" && attr.Key != "id")
                {
                    attributes[attr.Key] = attr.Value;
                }
            }
        }

        return attributes.Count > 0 ? attributes : null;
    }
}
